<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Expande Tu Futuro — LC Market Scanner</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

<style>
/* ─── RESET ─── */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{height:100%;scroll-behavior:smooth}

/* ─── VARIABLES ─── */
:root{
  --gold:#c9a84c;
  --gold2:#e8c96d;
  --gold-dim:rgba(201,168,76,.18);
  --bg:#060810;
  --bg2:#090c14;
  --surface:rgba(255,255,255,.03);
  --border:rgba(255,255,255,.06);
  --text:#e8e4d9;
  --muted:rgba(232,228,217,.4);
  --green:#2dd47e;
  --red:#f05858;
  --font-display:'Playfair Display',serif;
  --font-body:'DM Sans',sans-serif;
  --font-mono:'JetBrains Mono',monospace;
}

body{
  font-family:var(--font-body);
  background:var(--bg);
  color:var(--text);
  min-height:100vh;
  overflow-x:hidden;
  cursor:default;
}

/* ─── CANVAS BACKGROUND ─── */
#bg-canvas{
  position:fixed;inset:0;z-index:0;
  opacity:.35;pointer-events:none;
}

/* ─── GRID OVERLAY ─── */
.grid-overlay{
  position:fixed;inset:0;z-index:0;
  background-image:
    linear-gradient(rgba(201,168,76,.04) 1px,transparent 1px),
    linear-gradient(90deg,rgba(201,168,76,.04) 1px,transparent 1px);
  background-size:60px 60px;
  pointer-events:none;
}

/* ─── CORNER ACCENTS ─── */
.corner{position:fixed;z-index:1;width:80px;height:80px;pointer-events:none}
.corner-tl{top:0;left:0;border-top:2px solid rgba(201,168,76,.35);border-left:2px solid rgba(201,168,76,.35)}
.corner-tr{top:0;right:0;border-top:2px solid rgba(201,168,76,.35);border-right:2px solid rgba(201,168,76,.35)}
.corner-bl{bottom:0;left:0;border-bottom:2px solid rgba(201,168,76,.35);border-left:2px solid rgba(201,168,76,.35)}
.corner-br{bottom:0;right:0;border-bottom:2px solid rgba(201,168,76,.35);border-right:2px solid rgba(201,168,76,.35)}

/* ─── TICKER TAPE ─── */
.ticker-wrap{
  position:fixed;top:0;left:0;right:0;z-index:10;
  height:36px;background:rgba(6,8,16,.95);
  border-bottom:1px solid rgba(201,168,76,.2);
  overflow:hidden;display:flex;align-items:center;
}
.ticker-track{
  display:flex;gap:0;white-space:nowrap;
  animation:ticker 40s linear infinite;
}
.ticker-item{
  font-family:var(--font-mono);font-size:10.5px;
  padding:0 28px;color:var(--muted);
  display:flex;align-items:center;gap:6px;
  border-right:1px solid var(--border);
}
.ticker-item .sym{color:var(--text);font-weight:500}
.ticker-item .up{color:var(--green)}
.ticker-item .dn{color:var(--red)}
@keyframes ticker{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* ─── NAV ─── */
nav{
  position:fixed;top:36px;left:0;right:0;z-index:20;
  display:flex;align-items:center;justify-content:space-between;
  padding:14px 32px;
  background:rgba(6,8,16,.8);
  backdrop-filter:blur(12px);
  border-bottom:1px solid var(--border);
}
.nav-logo{display:flex;align-items:center;gap:10px}
.nav-logo img{width:34px;height:34px;border-radius:8px;object-fit:cover}
.nav-logo-text{font-family:var(--font-display);font-size:14px;letter-spacing:.02em;
  background:linear-gradient(135deg,var(--gold2),var(--gold));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent}
.nav-badge{
  font-family:var(--font-mono);font-size:9px;font-weight:500;
  padding:3px 8px;border-radius:3px;
  background:var(--gold-dim);color:var(--gold);
  border:1px solid rgba(201,168,76,.25);letter-spacing:.06em;
  text-transform:uppercase
}
.nav-cta{
  font-family:var(--font-body);font-size:13px;font-weight:500;
  padding:8px 20px;border-radius:6px;cursor:pointer;
  background:transparent;border:1px solid rgba(201,168,76,.4);color:var(--gold);
  transition:all .22s;letter-spacing:.02em;
}
.nav-cta:hover{background:var(--gold-dim);border-color:var(--gold)}

/* ─── MAIN ─── */
main{
  position:relative;z-index:5;
  min-height:100vh;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:120px 20px 60px;
  text-align:center;
}

/* ─── EYEBROW ─── */
.eyebrow{
  font-family:var(--font-mono);font-size:10px;font-weight:500;
  letter-spacing:.2em;text-transform:uppercase;
  color:var(--gold);
  display:flex;align-items:center;gap:10px;
  margin-bottom:32px;
  opacity:0;animation:fadeUp .6s ease .2s forwards;
}
.eyebrow::before,.eyebrow::after{content:'';flex:1;height:1px;background:linear-gradient(90deg,transparent,rgba(201,168,76,.4))}
.eyebrow::after{background:linear-gradient(270deg,transparent,rgba(201,168,76,.4))}

/* ─── LOGO HERO ─── */
.logo-hero{
  position:relative;margin-bottom:36px;
  opacity:0;animation:scaleIn .7s cubic-bezier(.2,.8,.2,1) .4s forwards;
}
.logo-hero img{
  width:clamp(100px,18vw,150px);
  border-radius:20px;
  box-shadow:0 0 0 1px rgba(201,168,76,.2),0 0 60px rgba(201,168,76,.12),0 20px 60px rgba(0,0,0,.6);
}
.logo-ring{
  position:absolute;inset:-12px;border-radius:28px;
  border:1px solid rgba(201,168,76,.15);
  animation:pulse-ring 3s ease-in-out infinite;
}
.logo-ring2{
  position:absolute;inset:-24px;border-radius:36px;
  border:1px solid rgba(201,168,76,.07);
  animation:pulse-ring 3s ease-in-out infinite .8s;
}
@keyframes pulse-ring{0%,100%{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.02)}}

/* ─── HEADLINE ─── */
h1{
  font-family:var(--font-display);
  font-size:clamp(2rem,5.5vw,4rem);
  font-weight:900;
  line-height:1.12;
  letter-spacing:-.02em;
  max-width:760px;
  margin-bottom:20px;
  color:#fff;
  text-shadow:0 2px 40px rgba(0,0,0,.5);
  opacity:0;animation:fadeUp .7s ease .6s forwards;
}
h1 em{
  font-style:normal;
  background:linear-gradient(135deg,var(--gold2) 0%,var(--gold) 50%,#a87830 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;
}

/* ─── SUBTITLE ─── */
.subtitle{
  font-size:clamp(14px,2vw,16px);
  color:var(--muted);font-weight:300;line-height:1.65;
  max-width:480px;margin-bottom:44px;
  opacity:0;animation:fadeUp .7s ease .75s forwards;
}

/* ─── STATS ROW ─── */
.stats-row{
  display:flex;align-items:stretch;gap:1px;
  background:rgba(201,168,76,.12);
  border:1px solid rgba(201,168,76,.18);
  border-radius:10px;overflow:hidden;
  margin-bottom:36px;
  opacity:0;animation:fadeUp .6s ease .9s forwards;
}
.stat-item{
  padding:12px 24px;background:rgba(6,8,16,.9);
  display:flex;flex-direction:column;gap:2px;
  flex:1;min-width:110px;
}
.stat-item:not(:last-child){border-right:1px solid rgba(201,168,76,.12)}
.stat-label{font-family:var(--font-mono);font-size:9px;letter-spacing:.12em;text-transform:uppercase;color:var(--muted)}
.stat-value{font-family:var(--font-mono);font-size:18px;font-weight:500;color:var(--gold2)}
.stat-sub{font-family:var(--font-mono);font-size:9px;color:rgba(201,168,76,.4)}

/* ─── CTA BUTTON ─── */
.cta-wrap{
  display:flex;flex-direction:column;align-items:center;gap:14px;
  opacity:0;animation:fadeUp .6s ease 1.05s forwards;
}
.btn-primary{
  position:relative;overflow:hidden;
  padding:16px 48px;border-radius:8px;cursor:pointer;
  background:linear-gradient(135deg,#b8943d,var(--gold2),#b8943d);
  background-size:200% 100%;
  border:none;color:#07070f;
  font-family:var(--font-body);font-size:16px;font-weight:700;
  letter-spacing:.03em;
  box-shadow:0 4px 30px rgba(201,168,76,.25),0 1px 0 rgba(255,255,255,.15) inset;
  transition:all .3s;
  animation:btn-shimmer 3s linear 2s infinite;
}
@keyframes btn-shimmer{
  0%{background-position:200% 0}50%{background-position:0 0}100%{background-position:-200% 0}
}
.btn-primary:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 40px rgba(201,168,76,.4),0 1px 0 rgba(255,255,255,.2) inset;
}
.btn-primary:active{transform:translateY(0)}
.btn-primary::before{
  content:'';position:absolute;inset:0;
  background:linear-gradient(135deg,rgba(255,255,255,.15),transparent,rgba(255,255,255,.05));
}
.trial-note{
  font-family:var(--font-mono);font-size:10px;color:var(--muted);
  letter-spacing:.04em;line-height:1.7;
}
.trial-note strong{color:var(--gold);font-weight:500}

/* ─── FEATURES STRIP ─── */
.features-strip{
  display:flex;align-items:center;gap:24px;flex-wrap:wrap;justify-content:center;
  margin-top:52px;padding-top:28px;
  border-top:1px solid var(--border);
  opacity:0;animation:fadeUp .6s ease 1.2s forwards;
}
.feat-item{
  display:flex;align-items:center;gap:7px;
  font-size:11px;color:var(--muted);letter-spacing:.03em;
}
.feat-dot{width:5px;height:5px;border-radius:50%;background:var(--gold);opacity:.7;flex-shrink:0}

/* ─── SCROLL HINT ─── */
.scroll-hint{
  position:fixed;bottom:28px;left:50%;transform:translateX(-50%);
  z-index:20;display:flex;flex-direction:column;align-items:center;gap:6px;
  opacity:0;animation:fadeIn 1s ease 2.5s forwards;
}
.scroll-mouse{
  width:20px;height:30px;border-radius:10px;
  border:1px solid rgba(201,168,76,.3);
  display:flex;justify-content:center;padding-top:5px;
}
.scroll-dot{
  width:3px;height:6px;border-radius:2px;
  background:var(--gold);opacity:.7;
  animation:scroll-bounce 1.5s ease infinite;
}
@keyframes scroll-bounce{0%,100%{transform:translateY(0);opacity:.7}50%{transform:translateY(6px);opacity:.2}}
.scroll-hint span{font-family:var(--font-mono);font-size:9px;color:rgba(201,168,76,.35);letter-spacing:.15em;text-transform:uppercase}

/* ─── MODAL ─── */
.modal-bg{
  position:fixed;inset:0;z-index:100;
  background:rgba(4,5,10,.92);
  backdrop-filter:blur(16px);
  display:none;align-items:center;justify-content:center;
  padding:20px;
}
.modal-bg.open{display:flex}
.modal{
  background:#0a0d18;
  border:1px solid rgba(201,168,76,.2);
  border-radius:16px;width:100%;max-width:440px;
  box-shadow:0 40px 100px rgba(0,0,0,.7),0 0 0 1px rgba(201,168,76,.08);
  overflow:hidden;animation:modalIn .4s cubic-bezier(.2,.8,.2,1);
}
@keyframes modalIn{from{opacity:0;transform:scale(.94) translateY(16px)}to{opacity:1;transform:none}}
.modal-header{
  padding:28px 28px 0;
  display:flex;justify-content:space-between;align-items:flex-start;
}
.modal-title{font-family:var(--font-display);font-size:22px;font-weight:700;color:#fff}
.modal-sub{font-size:12px;color:var(--muted);margin-top:4px}
.modal-close{
  background:none;border:none;color:var(--muted);cursor:pointer;
  font-size:20px;line-height:1;padding:4px;
  transition:color .2s;
}
.modal-close:hover{color:#fff}

.modal-tabs{display:flex;gap:0;margin:20px 28px 0;border-radius:8px;overflow:hidden;background:rgba(255,255,255,.04)}
.tab-btn{
  flex:1;padding:10px;font-size:12px;font-weight:600;
  font-family:var(--font-body);cursor:pointer;border:none;
  background:transparent;color:var(--muted);transition:all .2s;letter-spacing:.03em;
}
.tab-btn.active{background:var(--gold-dim);color:var(--gold)}

.modal-body{padding:24px 28px 28px}
.field{margin-bottom:16px}
.field label{
  display:block;font-size:11px;font-weight:500;letter-spacing:.07em;text-transform:uppercase;
  color:var(--muted);margin-bottom:6px;font-family:var(--font-mono);
}
.field input{
  width:100%;padding:12px 14px;border-radius:7px;
  background:rgba(255,255,255,.05);
  border:1px solid rgba(255,255,255,.09);
  color:var(--text);font-family:var(--font-body);font-size:14px;
  transition:border-color .2s;outline:none;
}
.field input:focus{border-color:rgba(201,168,76,.45);background:rgba(201,168,76,.04)}
.field input::placeholder{color:rgba(255,255,255,.2)}

.btn-submit{
  width:100%;padding:14px;border-radius:8px;cursor:pointer;
  background:linear-gradient(135deg,#b8943d,var(--gold2));
  border:none;color:#07070f;font-size:15px;font-weight:700;
  font-family:var(--font-body);letter-spacing:.02em;
  box-shadow:0 4px 20px rgba(201,168,76,.2);
  transition:all .2s;margin-top:4px;
}
.btn-submit:hover{transform:translateY(-1px);box-shadow:0 8px 30px rgba(201,168,76,.35)}
.btn-submit:disabled{opacity:.5;cursor:not-allowed;transform:none}

.divider{
  display:flex;align-items:center;gap:12px;margin:18px 0;
  font-size:11px;color:rgba(255,255,255,.18);font-family:var(--font-mono);
}
.divider::before,.divider::after{content:'';flex:1;height:1px;background:rgba(255,255,255,.07)}

.btn-google{
  width:100%;padding:12px;border-radius:8px;cursor:pointer;
  background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.1);
  color:var(--text);font-size:14px;font-family:var(--font-body);
  display:flex;align-items:center;justify-content:center;gap:10px;
  transition:all .2s;
}
.btn-google:hover{background:rgba(255,255,255,.1);border-color:rgba(255,255,255,.18)}

.msg-box{
  padding:10px 14px;border-radius:6px;font-size:12px;margin-top:12px;display:none;
}
.msg-box.ok{background:rgba(45,212,126,.1);color:var(--green);border:1px solid rgba(45,212,126,.2)}
.msg-box.err{background:rgba(240,88,88,.1);color:var(--red);border:1px solid rgba(240,88,88,.2)}
.msg-box.info{background:rgba(201,168,76,.1);color:var(--gold2);border:1px solid rgba(201,168,76,.2)}

.modal-footer{
  padding:12px 28px 20px;text-align:center;
  font-size:10px;color:rgba(255,255,255,.2);font-family:var(--font-mono);
  border-top:1px solid var(--border);line-height:1.8;
}

/* ─── ANIMATIONS ─── */
@keyframes fadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:none}}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes scaleIn{from{opacity:0;transform:scale(.85)}to{opacity:1;transform:scale(1)}}

/* ─── RESPONSIVE ─── */
@media(max-width:600px){
  nav{padding:10px 16px}
  h1{font-size:1.85rem}
  .stats-row{flex-wrap:wrap}
  .stat-item{min-width:calc(50% - 1px)}
}
</style>
</head>
<body>

<!-- CANVAS BG (animated dots) -->
<canvas id="bg-canvas"></canvas>
<div class="grid-overlay"></div>
<div class="corner corner-tl"></div>
<div class="corner corner-tr"></div>
<div class="corner corner-bl"></div>
<div class="corner corner-br"></div>

<!-- TICKER TAPE -->
<div class="ticker-wrap">
  <div class="ticker-track" id="tickerTrack">
    <!-- filled by JS -->
  </div>
</div>

<!-- NAV -->
<nav>
  <div class="nav-logo">
    <img src="/static/logo.png" alt="LC Market Scanner" onerror="this.style.display='none'">
    <span class="nav-logo-text">Expande Tu Futuro</span>
  </div>
  <div style="display:flex;align-items:center;gap:14px">
    <span class="nav-badge">Beta · Cupos limitados</span>
    <button class="nav-cta" onclick="openModal('login')">Iniciar sesión →</button>
  </div>
</nav>

<!-- MAIN HERO -->
<main>
  <div class="eyebrow">LC Market Scanner · Análisis Técnico Inteligente</div>

  <div class="logo-hero">
    <div class="logo-ring2"></div>
    <div class="logo-ring"></div>
    <img src="/static/logo.png" alt="LC Market Scanner" onerror="this.style.background='rgba(201,168,76,.1)';this.style.padding='20px'">
  </div>

  <h1>Toma decisiones de<br>inversión con <em>criterio real</em></h1>

  <p class="subtitle">
    SMAs 20 · 50 · 100 · 200 + RSI + SuperTrend + alertas automáticas.<br>
    Todo organizado para que el mercado no te tome por sorpresa.
  </p>

  <div class="stats-row">
    <div class="stat-item">
      <span class="stat-label">Cupos</span>
      <span class="stat-value" id="cuposVal">43/50</span>
      <span class="stat-sub">disponibles</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">En espera</span>
      <span class="stat-value" id="esperaVal">0</span>
      <span class="stat-sub">personas</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Activos</span>
      <span class="stat-value">43</span>
      <span class="stat-sub">vigilados</span>
    </div>
    <div class="stat-item">
      <span class="stat-label">Actualiz.</span>
      <span class="stat-value">1D</span>
      <span class="stat-sub">tiempo real</span>
    </div>
  </div>

  <div class="cta-wrap">
    <button class="btn-primary" onclick="openModal('register')">
      Comenzar prueba gratuita
    </button>
    <div class="trial-note">
      <strong>Trial 3 días · Acceso completo</strong><br>
      Sin tarjeta de crédito &nbsp;·&nbsp; Sin compromisos
    </div>
  </div>

  <div class="features-strip">
    <div class="feat-item"><span class="feat-dot"></span>Gráficos estilo TradingView</div>
    <div class="feat-item"><span class="feat-dot"></span>Alertas de cruce SMA 100/200</div>
    <div class="feat-item"><span class="feat-dot"></span>Panel RSI con señales extremas</div>
    <div class="feat-item"><span class="feat-dot"></span>SuperTrend automático</div>
    <div class="feat-item"><span class="feat-dot"></span>Móvil · Tablet · Desktop</div>
  </div>
</main>

<!-- SCROLL HINT -->
<div class="scroll-hint">
  <div class="scroll-mouse"><div class="scroll-dot"></div></div>
  <span>explorar</span>
</div>

<!-- ─── MODAL AUTH ─── -->
<div class="modal-bg" id="modalBg" onclick="closeModalOutside(event)">
  <div class="modal">
    <div class="modal-header">
      <div>
        <div class="modal-title" id="modalTitle">Crear cuenta</div>
        <div class="modal-sub" id="modalSub">3 días de acceso completo · sin tarjeta</div>
      </div>
      <button class="modal-close" onclick="closeModal()">✕</button>
    </div>

    <div class="modal-tabs">
      <button class="tab-btn active" id="tabRegister" onclick="switchTab('register')">Registrarse</button>
      <button class="tab-btn" id="tabLogin" onclick="switchTab('login')">Iniciar sesión</button>
    </div>

    <div class="modal-body">

      <!-- REGISTER FORM -->
      <div id="formRegister">
        <div class="field">
          <label>Nombre</label>
          <input type="text" id="regName" placeholder="Tu nombre" autocomplete="name">
        </div>
        <div class="field">
          <label>Email</label>
          <input type="email" id="regEmail" placeholder="tu@email.com" autocomplete="email">
        </div>
        <div class="field">
          <label>Contraseña</label>
          <input type="password" id="regPass" placeholder="Mínimo 6 caracteres" autocomplete="new-password">
        </div>
        <button class="btn-submit" id="btnRegister" onclick="doRegister()">Crear cuenta gratis →</button>
        <div class="divider">o continúa con</div>
        <button class="btn-google" onclick="doGoogleAuth()">
          <svg width="16" height="16" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
          Continuar con Google
        </button>
        <div class="msg-box" id="msgRegister"></div>
      </div>

      <!-- LOGIN FORM -->
      <div id="formLogin" style="display:none">
        <div class="field">
          <label>Email</label>
          <input type="email" id="logEmail" placeholder="tu@email.com" autocomplete="email">
        </div>
        <div class="field">
          <label>Contraseña</label>
          <input type="password" id="logPass" placeholder="Tu contraseña" autocomplete="current-password">
        </div>
        <button class="btn-submit" id="btnLogin" onclick="doLogin()">Entrar al dashboard →</button>
        <div class="divider">o continúa con</div>
        <button class="btn-google" onclick="doGoogleAuth()">
          <svg width="16" height="16" viewBox="0 0 24 24"><path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z" fill="#4285F4"/><path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/><path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/><path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/></svg>
          Continuar con Google
        </button>
        <div style="text-align:right;margin-top:10px">
          <a href="#" onclick="doForgotPassword()" style="font-size:11px;color:var(--muted);text-decoration:none;font-family:var(--font-mono)">¿Olvidaste tu contraseña?</a>
        </div>
        <div class="msg-box" id="msgLogin"></div>
      </div>

    </div>
    <div class="modal-footer">
      Cifrado con TLS · Datos protegidos · Sin spam garantizado
    </div>
  </div>
</div>

<!-- ─── SUPABASE ─── -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
/* ─── SUPABASE CLIENT ─── */
const SUPABASE_URL = 'https://fhuijfysfqzjmzadsace.supabase.co ';
const SUPABASE_KEY = 'sb_publishable_TEj5FnpX_bQeIwTODoA8_Q_JFfpIIaF';

let sb = null;
try {
  sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
} catch(e) {
  console.warn('Supabase init error:', e);
}

/* ─── CHECK SESSION ─── */
async function checkSession() {
  if (!sb) return;
  try {
    const { data: { session } } = await sb.auth.getSession();
    if (session) window.location.href = '/app';
  } catch(e) {}
}
checkSession();

/* ─── AUTH HANDLERS ─── */
async function doRegister() {
  const name  = document.getElementById('regName').value.trim();
  const email = document.getElementById('regEmail').value.trim();
  const pass  = document.getElementById('regPass').value;
  const btn   = document.getElementById('btnRegister');
  const msg   = document.getElementById('msgRegister');

  if (!email || !pass) { showMsg(msg,'err','Por favor completa todos los campos'); return; }
  if (pass.length < 6) { showMsg(msg,'err','La contraseña debe tener al menos 6 caracteres'); return; }

  btn.disabled = true; btn.textContent = 'Creando cuenta…';
  try {
    const { data, error } = await sb.auth.signUp({
      email, password: pass,
      options: { data: { full_name: name } }
    });
    if (error) throw error;
    showMsg(msg,'ok','✓ Cuenta creada. Revisa tu email para confirmar.');
    btn.textContent = '¡Listo! Revisa tu email';
  } catch(e) {
    btn.disabled = false; btn.textContent = 'Crear cuenta gratis →';
    const errMap = {
      'User already registered': 'Este email ya está registrado. Intenta iniciar sesión.',
      'Password should be at least 6 characters': 'La contraseña debe tener al menos 6 caracteres.',
    };
    showMsg(msg,'err', errMap[e.message] || e.message);
  }
}

async function doLogin() {
  const email = document.getElementById('logEmail').value.trim();
  const pass  = document.getElementById('logPass').value;
  const btn   = document.getElementById('btnLogin');
  const msg   = document.getElementById('msgLogin');

  if (!email || !pass) { showMsg(msg,'err','Ingresa tu email y contraseña'); return; }

  btn.disabled = true; btn.textContent = 'Ingresando…';
  try {
    const { data, error } = await sb.auth.signInWithPassword({ email, password: pass });
    if (error) throw error;
    showMsg(msg,'ok','✓ Bienvenido. Redirigiendo…');
    setTimeout(() => window.location.href = '/app', 1000);
  } catch(e) {
    btn.disabled = false; btn.textContent = 'Entrar al dashboard →';
    const errMap = {
      'Invalid login credentials': 'Email o contraseña incorrectos.',
      'Email not confirmed': 'Confirma tu email antes de ingresar.',
    };
    showMsg(msg,'err', errMap[e.message] || e.message);
  }
}

async function doGoogleAuth() {
  if (!sb) return;
  try {
    await sb.auth.signInWithOAuth({
      provider: 'google',
      options: { redirectTo: window.location.origin + '/app' }
    });
  } catch(e) { console.error(e); }
}

async function doForgotPassword() {
  const email = document.getElementById('logEmail').value.trim();
  const msg = document.getElementById('msgLogin');
  if (!email) { showMsg(msg,'info','Escribe tu email arriba y presiona este enlace'); return; }
  try {
    await sb.auth.resetPasswordForEmail(email, { redirectTo: window.location.origin + '/app' });
    showMsg(msg,'ok','✓ Email de recuperación enviado. Revisa tu bandeja.');
  } catch(e) { showMsg(msg,'err', e.message); }
}

/* ─── UI HELPERS ─── */
function showMsg(el, type, text) {
  el.className = 'msg-box ' + type;
  el.textContent = text;
  el.style.display = 'block';
}

function openModal(tab) {
  document.getElementById('modalBg').classList.add('open');
  document.body.style.overflow = 'hidden';
  switchTab(tab);
}

function closeModal() {
  document.getElementById('modalBg').classList.remove('open');
  document.body.style.overflow = '';
}

function closeModalOutside(e) {
  if (e.target === document.getElementById('modalBg')) closeModal();
}

document.addEventListener('keydown', e => { if(e.key === 'Escape') closeModal(); });

function switchTab(tab) {
  const isReg = tab === 'register';
  document.getElementById('tabRegister').classList.toggle('active', isReg);
  document.getElementById('tabLogin').classList.toggle('active', !isReg);
  document.getElementById('formRegister').style.display = isReg ? 'block' : 'none';
  document.getElementById('formLogin').style.display = isReg ? 'none' : 'block';
  document.getElementById('modalTitle').textContent = isReg ? 'Crear cuenta' : 'Bienvenido de nuevo';
  document.getElementById('modalSub').textContent = isReg ? '3 días de acceso completo · sin tarjeta' : 'Ingresa a tu dashboard';
}

/* ─── TICKER TAPE DATA ─── */
const TICKERS = [
  {sym:'BTC',price:'95,240',chg:'+2.4%',up:true},{sym:'ETH',price:'3,180',chg:'+1.8%',up:true},
  {sym:'S&P500',price:'5,842',chg:'-0.3%',up:false},{sym:'NQ100',price:'20,310',chg:'+0.7%',up:true},
  {sym:'AAPL',price:'224.50',chg:'+1.1%',up:true},{sym:'GOLD',price:'2,918',chg:'+0.5%',up:true},
  {sym:'SPY',price:'584',chg:'-0.2%',up:false},{sym:'QQQ',price:'493',chg:'+0.9%',up:true},
  {sym:'VOO',price:'536',chg:'-0.1%',up:false},{sym:'SMH',price:'228',chg:'+3.2%',up:true},
  {sym:'SCHD',price:'29.4',chg:'+0.4%',up:true},{sym:'VGT',price:'581',chg:'+1.5%',up:true},
];

function buildTicker() {
  const track = document.getElementById('tickerTrack');
  const items = [...TICKERS, ...TICKERS]; // duplicate for seamless loop
  track.innerHTML = items.map(t => `
    <div class="ticker-item">
      <span class="sym">${t.sym}</span>
      <span>${t.price}</span>
      <span class="${t.up?'up':'dn'}">${t.chg}</span>
    </div>`).join('');
}
buildTicker();

/* ─── CANVAS STARFIELD ─── */
(function() {
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext('2d');
  let W, H, particles = [];

  function resize() {
    W = canvas.width = window.innerWidth;
    H = canvas.height = window.innerHeight;
  }

  function initParticles() {
    particles = Array.from({length: 80}, () => ({
      x: Math.random() * W,
      y: Math.random() * H,
      r: Math.random() * 1.2 + .3,
      vx: (Math.random() - .5) * .15,
      vy: (Math.random() - .5) * .15,
      alpha: Math.random() * .5 + .1
    }));
  }

  function draw() {
    ctx.clearRect(0, 0, W, H);
    particles.forEach(p => {
      p.x += p.vx; p.y += p.vy;
      if (p.x < 0) p.x = W; if (p.x > W) p.x = 0;
      if (p.y < 0) p.y = H; if (p.y > H) p.y = 0;
      ctx.beginPath();
      ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(201,168,76,${p.alpha})`;
      ctx.fill();
    });
    // Draw faint connection lines
    for (let i = 0; i < particles.length; i++) {
      for (let j = i + 1; j < particles.length; j++) {
        const dx = particles[i].x - particles[j].x;
        const dy = particles[i].y - particles[j].y;
        const dist = Math.sqrt(dx*dx + dy*dy);
        if (dist < 120) {
          ctx.beginPath();
          ctx.moveTo(particles[i].x, particles[i].y);
          ctx.lineTo(particles[j].x, particles[j].y);
          ctx.strokeStyle = `rgba(201,168,76,${(1 - dist/120) * .06})`;
          ctx.lineWidth = .5;
          ctx.stroke();
        }
      }
    }
    requestAnimationFrame(draw);
  }

  resize();
  initParticles();
  draw();
  window.addEventListener('resize', () => { resize(); initParticles(); });
})();

/* ─── LOAD REAL CUPOS FROM SUPABASE ─── */
async function loadCupos() {
  if (!sb) return;
  try {
    const { count } = await sb
      .from('profiles')
      .select('*', { count: 'exact', head: true });
    if (count !== null) {
      const cuposTotal = 50;
      const used = Math.min(count, cuposTotal);
      document.getElementById('cuposVal').textContent = `${used}/${cuposTotal}`;
    }
  } catch(e) {}
}
loadCupos();
</script>
</body>
</html>
